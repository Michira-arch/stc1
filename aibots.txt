# STC App (Student Center) - AI Context Documentation

This document provides context for AI agents and bots to assist users within the Student Center application.

## 1. Project Overview
- **Name**: Student Center (STC)
- **Type**: Web Application / PWA (Progressive Web App)
- **Tech Stack**:
    - **Frontend**: React 19, Vite, TypeScript, Tailwind CSS 4
    - **State Management**: Zustand (`store/useAppStore.ts`)
    - **Database/Auth**: Supabase (PostgreSQL, Auth, Storage)
    - **Styling**: Tailwind CSS with PostCSS
    - **3D/Graphics**: Three.js, React Three Fiber (for specific components/games)

## 2. Directory Structure
- **Root**: Contains configuration files (`package.json`, `vite.config.ts`, `tailwind.config.js`).
- **src/**: Core source code.
- **pages/**: Route components.
    - `Feed.tsx`: Main timeline of stories.
    - `Explore.tsx`: Discovery page.
    - `Profile.tsx`: User profile page with customization.
    - `Editor.tsx`: Story creation interface.
    - `stc-apps/`: Sub-apps (FoodServices, FreshmanStarterPack, LostAndFound, Marketplace).
    - `games/`: Games integrated into the app.
- **components/**: Reusable UI components.
- **database/**: SQL migration files and schema definitions.
- **types.ts**: TypeScript definitions for the data model.

## 3. Data Model (Supabase)
The application uses a relational database schema:

### Users & Profiles
- **Usage**: Handles user identity and profile data.
- **Table**: `public.profiles`
    - `id`: UUID (Foreign Key to `auth.users`)
    - `full_name`: Display name.
    - `handle`: Unique user handle (e.g., @username).
    - `bio`: User biography.
    - `avatar_url`, `cover_url`: Profile images.
    - `privacy_settings`: JSONB (`showBio`, `showTimeline`).
    - `font_size`, `is_italic`: Accessibility/Style preferences.

### Stories (Feed Content)
- **Usage**: Main content type shared by users.
- **Table**: `public.stories`
    - `title`, `content` (HTML), `description`.
    - `image_url`, `audio_url`: Media attachments.
    - `is_hidden`: For archiving stories.
    - `views_count`: Engagement metric.

### Engagement
- **Comments**: `public.comments` (Supports nested replies via `parent_id`).
- **Likes**: `public.likes` (Join table between users and stories).

### Other Features
- **Rooms**: `public.rooms` (Realtime spaces).
- **Blind Date**: `public.blind_date_preferences` (Matching logic).
- **Notifications**: `public.fcm_tokens` (Firebase Cloud Messaging).

## 4. Key Features & Capabilities

### Authentication
- Supports Email/Password login.
- **Guest Mode**: Allows limited access without an account (`loginAsGuest`).

### Story Editor
- Users can create rich text stories (HTML support).
- Supports image and audio uploads.
- **Anonymous Posting**: Option to post without revealing identity.
- **Drafts**: Saved locally in session.

### STC Apps (Sub-modules)
The app includes several utility modules for students:
1.  **Freshman Starter Pack**: Guide/Resources for new students.
2.  **Food Services**: Cafeteria or food info.
3.  **Lost & Found**: Item recovery board.
4.  **Marketplace**: Buying/selling platform.

### Gaming
- Includes a "Runner" game (likely a Subway Surfers style endless runner) located in `pages/games/runner`.

### User Profile
- Detailed profiles with Covers and Avatars.
- Privacy controls to hide specific sections.
- Editable "Handle" for unique identification.

## 5. State Management (AppContext)
Global state is managed via `useAppStore` (Zustand) and exposed via `AppContext`.
Key actions available in the handle:
- `toggleTheme()`: Switch Light/Dark mode.
- `updateUserHandle(handle)`: Change user handle.
- `addStory(...)`, `deleteStory(...)`: Content management.
- `login()`, `logout()`: Session control.

## 6. Realtime
- Uses Supabase Realtime for live updates on interactions.
- Presence features implemented in `realtime/` directory.

---
*Use this context to understand user queries about "Where do I change my handle?", "How do I post anonymously?", or "What is in the freshman pack?".*
